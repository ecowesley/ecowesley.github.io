<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPAs-輸血護理</title>
    <style>
        body { font-family: "Microsoft JhengHei", Arial, sans-serif; margin: 0; padding: 20px; line-height: 1.6; }
        
        /* 頁籤樣式 */
        .tab-container { display: flex; background-color: #f1f1f1; border-bottom: 1px solid #ccc; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; background-color: #f1f1f1; border: none; outline: none; transition: 0.3s; font-size: 16px; }
        .tab:hover { background-color: #ddd; }
        /* 讓選中的頁籤反綠 */
        .tab.active {
            background-color: #04AA6D; 
            color: white;             
            font-weight: bold;
            border: none;             
        }

        .tab:hover:not(.active) {
            background-color: #ddd;
        }
        .content { display: none; padding: 20px; border: 1px solid #eee; }
        .content.active { display: block; }

        /* 表格與表單樣式 */
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #000; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; }
        .info-header { display: flex; gap: 20px; margin-bottom: 15px; flex-wrap: wrap; }
        input[type="text"], input[type="date"], textarea { padding: 5px; border: 1px solid #ccc; font-size: 14px; }
        textarea { width: 100%; height: 80px; resize: vertical; }

        /* 按鈕樣式 */
        .btn-print { background-color: #28a745; color: white; padding: 10px 15px; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
        .btn-print:hover { background-color: #218838; }
        .print-pos { float: right; margin-bottom: 10px; }

        /* 隱藏區塊 */
        .feedback-group { display: none; margin-top: 10px; }
        .feedback-item { margin-bottom: 5px; display: block; }

        /* 列印格式優化 */
        @media print {
            .no-print, .tab-container, .btn-print, .print-exclude { display: none !important; }
            body { padding: 0; }
            .content { display: block !important; border: none; }
            #tab1 { display: none !important; } /* 只印評量表 */
            
            /* 只顯示被勾選的質性回饋 */
            .feedback-item { display: none; }
            .feedback-item:has(input:checked) { display: block !important; }
            
            input[type="radio"], input[type="checkbox"] { accent-color: black; }
        }
    </style>
</head>
<body>

    <div class="tab-container no-print">
        <button class="tab active" onclick="showTab('tab1')">EPAs-輸血護理-(1)說明</button>
        <button class="tab" onclick="showTab('tab2')">輸血護理-(2)評量表</button>
    </div>

    <div id="tab1" class="content active">
        <h1>可信賴專業活動 EPAs-輸血護理</h1>
        
        <h3>1. 標題</h3>
        <p>輸血護理</p>

        <h3>2. 任務描述</h3>
        <p>(1)確認醫囑及取得同意<br>
           (2)核對血袋血品及病人確認(雙人核對)<br>
           (3)輸血前、中、後評估及護理<br>
           (4)衛教指導<br>
           (5)輸血紀錄<br>
            <b>限制：</b><br>
            排除緊急輸血。<br>
            <b>完成訓練必需（不限於）觀察之臨床情境：</b><br>
            單位內一般輸血作業。</p>
        
        <h3>3. 任務失敗時可能造成的風險</h3>
        <p>(1)學員：違反作業規範導致醫療缺失，需負法律責任並承受極大心理壓力。<br>
           (2)病人：輸血錯誤引發嚴重溶血反應或過敏，危及生命安全；輸血時效延誤，錯失治療時機。<br>
           (3)醫院：醫療糾紛損害醫院聲譽。</p>
        
        <h3>4. 對應之核心能力</h3>
        <table>
            <tr>
                <td>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid black;">
                        <tr style="background-color: #d9d9d9; text-align: center; font-weight: bold;">
                            <td style="border: 1px solid black; width: 85%; text-align: center; vertical-align: middle; padding: 5px;">ACGME 核心能力</td>
                            <td style="border: 1px solid black; width: 15%; text-align: center; vertical-align: middle; padding: 5px;">核心能力</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">病人照護 Patient Care（PC） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">醫學知識 Medical Knowledge（MK） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">從工作中學習及成長 Practice-based learning and improvement （PBLI） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">人際與溝通技巧 Interpersonal & Communication Skills（ICS） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">專業素養 Professionalism（PROF） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">制度下之臨床工作 System-based Practice（SBP） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <h3>5. 先備知識、技能、態度與經驗</h3>
        <table>
            <tr>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">知識</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">技能</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">態度</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">必要經歷</th>
            </tr>
            <tr>
                <td>能熟讀輸血標準工作指導書。</td>
                <td>(1)建立輸血輸液注射管路。<br>(2)執行輸血資訊操作。</td>
                <td>謹慎核對、展現專業說明能力。</td>
                <td>全程見習病人輸血至少 2 次（含）以上。</td>
            </tr>
        </table>

        <h3>6. 評估進展所需相關資訊</h3>
        <p>直接觀察評估：針對學員在某一次（或某一班）任務執行的實際表現進行觀察與評估，推薦的工具有 ad-hoc EPA-based assessment、mini-CEX、DOPS……等，試用期內至少擇一工具完成 3 次。</p>

        <h3>7. 期待學員能夠獨立操作的時機</h3>
        <p>一年內達Level 4。</p>

        <h3>8. 信賴等級維持期限</h3>
        <p>離開工作單位≧6 個月，信賴授權、應重新評估至少 1 次且達 Level 4。</p>
    </div>

    <div id="tab2" class="content">
        <button class="btn-print print-pos no-print" onclick="handlePrint()">列印/另存PDF</button>
        <h1>可信賴專業活動 EPAs-輸血護理評量表</h1>

        <style>
            .info-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
                border: none !important;
            }

            .info-table td {
                padding: 10px 5px;
                border: none !important;
                vertical-align: middle;
            }

            .info-table input[type="text"], 
            .info-table input[type="date"] {
                padding: 5px;
                font-size: 14px;
            }
        </style>

        <table class="info-table">
            <tr>
                <td style="width: 45%;">
                    學員：<input type="text" id="studentName" placeholder="輸入姓名"> 
                </td>
                <td>
                    到職日（西元年∕月∕日）：<input type="date" id="hireDate"> 
                </td>
            </tr>
            <tr>
                <td>
                    教師：<input type="text" id="teacherName" placeholder="輸入姓名"> 
                </td>
                <td>
                    填表日期（西元年∕月∕日）：<input type="date" id="formDate"> 
                </td>
            </tr>
        </table>

        <h3>1. 主題：輸血護理</h3>

        <h3>2. 情境：</h3>
        <p>單位內一般輸血作業。</p>
        <p>【使用限制：排除緊急輸血。】</p>
        
        <h3>3. 信賴等級評量：</h3>
        <p>（觀察學員執行狀況，下次遇到類似情境時，您認為此學員勝任之程度)</p>
        
        <table >
            <tr>
                <th style="text-align: center; vertical-align: middle; width: 15%;">信賴等級</th>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 1</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 2</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 3</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 4</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 5</td>
            </tr>
            <tr>
                <th style="text-align: center; vertical-align: middle;">評量項目</th>
                <td style="text-align: center; vertical-align: middle;">學習者在旁觀察</td>
                <td style="text-align: center; vertical-align: middle;">教師在旁指導，必要時協助</td>
                <td style="text-align: center; vertical-align: middle;">教師事後重點確認</td>
                <td style="text-align: center; vertical-align: middle;">可獨立執行</td>
                <td style="text-align: center; vertical-align: middle;">可對其他人進行教學</td>
            </tr>
            <tr>
                <th style="text-align: center; vertical-align: middle;">整體評量</th>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="1"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="2"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="3"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="4"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="5"></td>
            </tr>
        </table>   

        <h3>4. 回饋參考內容</h3>
        <table id="ratingTable">
            <tr>
                <th style="text-align: center; vertical-align: middle;">觀察發現</th>
                <th style="text-align: center; vertical-align: middle;">未觀察</th><th style="text-align: center; vertical-align: middle;">可再加強</th><th style="text-align: center; vertical-align: middle;">符合期待</th><th style="text-align: center; vertical-align: middle;">優於期待</th>
            </tr>
            <tr>
                <td>(1) 確認醫囑及取得同意</td>
                <td style="text-align: center;"><input type="radio" name="r1" value="bad" onclick="toggleFeedback(1, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="bad" onclick="toggleFeedback(1, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="good" onclick="toggleFeedback(1, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="good" onclick="toggleFeedback(1, 'good')"></td>
            </tr>
            <tr>
                <td>(2) 核對血袋血品及病人確認(雙人核對)</td>
                <td style="text-align: center;"><input type="radio" name="r2" value="bad" onclick="toggleFeedback(2, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="bad" onclick="toggleFeedback(2, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="good" onclick="toggleFeedback(2, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="good" onclick="toggleFeedback(2, 'good')"></td>
            </tr>
            <tr>
                <td>(3) 輸血前、中、後評估及護理</td>
                <td style="text-align: center;"><input type="radio" name="r3" value="bad" onclick="toggleFeedback(3, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="bad" onclick="toggleFeedback(3, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="good" onclick="toggleFeedback(3, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="good" onclick="toggleFeedback(3, 'good')"></td>
            </tr>
            <tr>
                <td>(4) 衛教指導</td>
                <td style="text-align: center;"><input type="radio" name="r4" value="bad" onclick="toggleFeedback(4, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="bad" onclick="toggleFeedback(4, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="good" onclick="toggleFeedback(4, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="good" onclick="toggleFeedback(4, 'good')"></td>
            </tr>
            <tr>
                <td>(5) 輸血紀錄</td>
                <td style="text-align: center;"><input type="radio" name="r5" value="bad" onclick="toggleFeedback(5, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="bad" onclick="toggleFeedback(5, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="good" onclick="toggleFeedback(5, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="good" onclick="toggleFeedback(5, 'good')"></td>
            </tr>
        </table>

        <h3>5. 學員質性回饋</h3>
        <textarea style="width: 100%; height: 200px; padding: 10px; font-size: 16px;" placeholder="請填寫您的學習心得..."></textarea>

        <h3>6. 護理臨床教師質性回饋</h3>
        
        <div id="commendable-title" style="display:none; font-weight:bold; color:green; margin-top:10px;">值得嘉許：</div>
        
        <div id="good-feedback-1" class="feedback-group">
            <span class="print-exclude"><b>(1) 確認醫囑及取得同意</b></span>
            <label class="feedback-item"><input type="checkbox"> 你在執行前能詳實核對醫囑與血庫通知單，並主動確認輸血同意書的有效性與簽署完整性，展現嚴謹的工作態度。</label>
            <label class="feedback-item"><input type="checkbox"> 你能精確辨識不同血品的適應症，並在核對過程中主動提及病人的檢驗數值（如 Hb 或 PLT）與輸血目的之關聯，顯示專業判斷力。</label>
            <label class="feedback-item"><input type="checkbox"> 你能將病人的檢驗數據（如 Hb、PLT）與輸血目的做連結說明，顯示你對輸血適應症具有良好臨床判斷能力。</label>
        </div>
        
        <div id="good-feedback-2" class="feedback-group">
            <span class="print-exclude"><b>(2) 核對血袋血品及病人確認 (雙人核對)</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能確實落實與另一位醫護人員共同核對病人姓名、床號、病歷號、血型等等資料，確保病人安全，值得嘉許。</label>
            <label class="feedback-item"><input type="checkbox"> 你在檢視血袋外觀、效期及是否有凝集、溶血或雜質時非常細心，展現專業與謹慎態度。</label>
            <label class="feedback-item"><input type="checkbox"> 你在核對時能清楚唸出資料並與同事相互確認，顯示良好的團隊合作與溝通能力。</label>
        </div>

        <div id="good-feedback-3" class="feedback-group">
            <span class="print-exclude"><b>(3) 輸血前、中、後評估及護理</b></span>
            <label class="feedback-item"><input type="checkbox"> 你在輸血前能測量基準生命徵象，並在開始輸血的前 15 分鐘留守床邊嚴密觀察，展現對急性輸血反應的高度警覺。</label>
            <label class="feedback-item"><input type="checkbox"> 針對輸血速度的調整，你能根據病人的心肺功能與年齡進行個別化考量，並正確設定點滴幫浦。</label>
            <label class="feedback-item"><input type="checkbox"> 輸血過程中你能持續關注病人主訴與有無輸血反應，讓病人感受到被細心照護。</label>
        </div>
        
        <div id="good-feedback-4" class="feedback-group">
            <span class="print-exclude"><b>(4) 衛教指導</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能主動向病人說明輸血目的與過程，讓病人了解正在進行的治療，展現以病人為中心的照護精神。</label>
            <label class="feedback-item"><input type="checkbox"> 你在說明可能出現的不適症狀時態度平穩，能減輕病人的焦慮。</label>
            <label class="feedback-item"><input type="checkbox"> 你能鼓勵病人若有不舒服要立即反應，提升病人參與安全照護的能力。</label>
        </div>

        <div id="good-feedback-5" class="feedback-group">
            <span class="print-exclude"><b>(5) 輸血紀錄</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能即時完成輸血相關紀錄，包含時間、血品種類、輸注量與生命徵象，顯示你對醫療文件完整性的重視。</label>
            <label class="feedback-item"><input type="checkbox"> 你的紀錄內容條理清楚，能讓其他同仁快速掌握輸血過程與病人狀況。</label>
            <label class="feedback-item"><input type="checkbox"> 你能確實記錄病人反應與護理處置，提升醫療照護的可追溯性。</label>
        </div>

        <div id="improvement-title" style="display:none; font-weight:bold; color:red; margin-top:10px;">可再精進：</div>
        
        <div id="bad-feedback-1" class="feedback-group">
            <span class="print-exclude"><b>(1) 確認醫囑及取得同意</b></span>
            <label class="feedback-item"><input type="checkbox"> 當發現醫囑內容與病人當前狀況略有落差時，建議更主動與醫師或學姊討論釐清，以強化臨床判斷與決策能力。</label>
            <label class="feedback-item"><input type="checkbox"> 在確認同意書時，可再加強向病人簡短說明「為什麼現在需要輸血」，讓病人更清楚。</label>
        </div>
        
         <div id="bad-feedback-2" class="feedback-group">
            <span class="print-exclude"><b>(2) 核對血袋血品及病人確認 (雙人核對)</b></span>
            <label class="feedback-item"><input type="checkbox"> 建議在核對時語速稍慢，逐項確實指認，可避免因急促而增加錯誤風險。</label>
            <label class="feedback-item"><input type="checkbox"> 若遇到環境較吵雜或工作繁忙時，可主動尋找相對安靜的空間完成核對，確保專注度。</label>
        </div>

        <div id="bad-feedback-3" class="feedback-group">
            <span class="print-exclude"><b>(3) 輸血前、中、後評估及護理</b></span>
            <label class="feedback-item"><input type="checkbox"> 建議在評估時，可將「可能出現的輸血反應」與目前病人狀況做連結思考，以提升風險預測能力。</label>
            <label class="feedback-item"><input type="checkbox"> 可再加強輸血後評估的紀錄完整性，如生命徵象、病人主觀感受及有無延遲性反應。</label>
            <label class="feedback-item"><input type="checkbox"> 若發現病人有不適徵象，可更快速地以標準流程回應（停輸血、保留管路、通知醫師），加強臨床反射動作。</label>
        </div>
        
        <div id="bad-feedback-4" class="feedback-group">
            <span class="print-exclude"><b>(4) 衛教指導</b></span>
            <label class="feedback-item"><input type="checkbox"> 衛教內容可以更聚焦在「病人能觀察到的變化」，避免使用過多醫學術語，確保病人能聽懂並配合觀察。</label>
            <label class="feedback-item"><input type="checkbox"> 可嘗試以病人能理解的生活化語言取代過多專業術語。</label>
            <label class="feedback-item"><input type="checkbox"> 若時間允許，可請病人簡單重述重點，確認其理解程度。</label>
        </div>

        <div id="bad-feedback-5" class="feedback-group">
            <span class="print-exclude"><b>(5) 輸血紀錄</b></span>
            <label class="feedback-item"><input type="checkbox"> 可注意時間點紀錄的精確性（開始、結束、評估時間），讓流程更符合標準作業。</label>
        </div>

        <br>
        <button class="btn-print no-print" onclick="handlePrint()">列印/另存PDF</button>
    </div>

    <script>
        // 頁籤切換
        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelector(`button[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // 聯動回饋邏輯
        function toggleFeedback(itemNum, type) {
            const goodGroup = document.getElementById(`good-feedback-${itemNum}`);
            const badGroup = document.getElementById(`bad-feedback-${itemNum}`);
            
            if (goodGroup && badGroup) {
                if (type === 'good') {
                    goodGroup.style.display = 'block';
                    badGroup.style.display = 'none';
                    badGroup.querySelectorAll('input').forEach(i => i.checked = false);
                } else {
                    goodGroup.style.display = 'none';
                    badGroup.style.display = 'block';
                    goodGroup.querySelectorAll('input').forEach(i => i.checked = false);
                }
            }

            // 控制大標題顯示
            updateSectionTitles();
        }

        function updateSectionTitles() {
            const anyGood = Array.from(document.querySelectorAll('[id^="good-feedback-"]')).some(el => el.style.display === 'block');
            const anyBad = Array.from(document.querySelectorAll('[id^="bad-feedback-"]')).some(el => el.style.display === 'block');
            
            document.getElementById('commendable-title').style.display = anyGood ? 'block' : 'none';
            document.getElementById('improvement-title').style.display = anyBad ? 'block' : 'none';
        }

        // 列印功能
        function handlePrint() {
            const name = document.getElementById('studentName').value || "未填寫";
            const date = document.getElementById('formDate').value || "未填寫日期";
            const originalTitle = document.title;

            // 設置 PDF 檔名（透過修改網頁 Title）
            document.title = `EPAs-輸血護理-${name}-${date}`;
            
            window.print();
            
            // 還原標題
            document.title = originalTitle;
        }

        // 預設今天日期
        document.getElementById('formDate').valueAsDate = new Date();
    </script>
</body>
</html>