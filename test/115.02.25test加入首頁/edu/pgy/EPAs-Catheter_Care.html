<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EPAs-留置管路照護</title>
    <style>
        body { font-family: "Microsoft JhengHei", Arial, sans-serif; margin: 0; padding: 20px; line-height: 1.6; }
        
        /* 頁籤樣式 */
        .tab-container { display: flex; background-color: #f1f1f1; border-bottom: 1px solid #ccc; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; background-color: #f1f1f1; border: none; outline: none; transition: 0.3s; font-size: 16px; }
        .tab:hover { background-color: #ddd; }
        /* 讓選中的頁籤反綠 */
        .tab.active {
            background-color: #04AA6D; 
            color: white;             
            font-weight: bold;
            border: none;             
        }

        .tab:hover:not(.active) {
            background-color: #ddd;
        }
        .content { display: none; padding: 20px; border: 1px solid #eee; }
        .content.active { display: block; }

        /* 表格與表單樣式 */
        table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
        th, td { border: 1px solid #000; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; }
        .info-header { display: flex; gap: 20px; margin-bottom: 15px; flex-wrap: wrap; }
        input[type="text"], input[type="date"], textarea { padding: 5px; border: 1px solid #ccc; font-size: 14px; }
        textarea { width: 100%; height: 80px; resize: vertical; }

        /* 按鈕樣式 */
        .btn-print { background-color: #28a745; color: white; padding: 10px 15px; border: none; cursor: pointer; border-radius: 5px; font-weight: bold; }
        .btn-print:hover { background-color: #218838; }
        .print-pos { float: right; margin-bottom: 10px; }

        /* 隱藏區塊 */
        .feedback-group { display: none; margin-top: 10px; }
        .feedback-item { margin-bottom: 5px; display: block; }
        
        /* 管路選擇區 */
        .catheter-options { margin-bottom: 15px; padding: 10px; background-color: #eef; border-radius: 5px; }
        .catheter-options label { margin-right: 15px; cursor: pointer; }

        /* 列印格式優化 (套用正確版邏輯) */
        @media print {
            /* 1. 隱藏不必要的元素 */
            .no-print, .tab-container, .btn-print, .print-exclude { display: none !important; }
            body { padding: 0; }
            .content { display: block !important; border: none; }
            #tab1 { display: none !important; } /* 只印評量表 */
            
            /* 2. 還原最原始的顯示方式 */
            .feedback-item { display: none; }
            .feedback-item:has(input:checked) { 
                display: block !important; 
                margin-bottom: 5px; 
                line-height: 1.6;
            }
            
            /* 3. 「其他」輸入框的列印修正 (關鍵) */
            .other-text-input {
                border: none !important;
                padding: 0 !important;
                margin: 0 !important;
                /* 強制字體、大小、粗細完全繼承自父層，解決「粗體」與「較大」問題 */
                font: inherit !important;
                font-weight: normal !important;
                font-size: 16px !important;
                /* 解決對齊問題：使用 baseline 讓字坐在同一條基準線上 */
                vertical-align: baseline !important;
                background: transparent !important;
                height: auto !important;
            }

            /* 隱藏提示字 */
            .other-text-input::placeholder { color: transparent !important; }
            
            input[type="radio"], input[type="checkbox"] { accent-color: black; }
            .catheter-options { border: 1px solid #ccc; background-color: white; }
        }
    </style>
</head>
<body>

    <div class="tab-container no-print">
        <button class="tab active" onclick="showTab('tab1')">EPAs-留置管路照護-(1)說明</button>
        <button class="tab" onclick="showTab('tab2')">留置管路照護-(2)評量表</button>
    </div>

    <div id="tab1" class="content active">
        <h1>台灣護理學會可信賴專業活動 EPAs-留置管路照護</h1>
        
        <h3>1. 標題</h3>
        <p>留置管路照護</p>

        <h3>2. 任務描述</h3>
        <p>執行留置管路照護，需完成：<br>
            (1)確認醫囑。<br>
            (2)執行病人辨識。<br>
            (3)評估管路置放部位及功能。<br>
            (4)執行管路護理。<br>
            (5)辨識管路異常狀況及處置，尋求團隊協助。<br>
            (6)指導病人及照護者管路自我照顧注意事項。<br>
            (7)完成護理紀錄。<br>
            <b>限制：</b><br>
            排除重要管路阻塞病人、嚴重滲漏病人、急性出血病人、感染敗血症病人。<br>
            <b>完成訓練必需（不限於）觀察之臨床情境：</b><br>
            照護鼻胃管留置病人、照護留置導尿管留置病人、照護動脈導管留置病人、照護靜脈導管留置病人、照護引流管留置病人、照護胸腔引流管留置病人。</p>
        
        <h3>3. 任務失敗時可能造成的風險</h3>
        <p>(1)學員：管路照護不熟悉或不完整，影響團隊信任及合作關係，倍感壓力喪失工作信心。<br>
           (2)病人：管路感染、滑脫及阻塞需再重新置放管路，造成病人傷害，影響病人生命安全，延長住院天數。<br>
           (3)醫院：病人∕照護者對醫護不信任，產生醫療糾紛，影響醫院聲譽。</p>
        
        <h3>4. 對應之核心能力</h3>
        <table>
            <tr>
                <td>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid black;">
                        <tr style="background-color: #d9d9d9; text-align: center; font-weight: bold;">
                            <td style="border: 1px solid black; width: 85%; text-align: center; vertical-align: middle; padding: 5px;">ACGME 核心能力</td>
                            <td style="border: 1px solid black; width: 15%; text-align: center; vertical-align: middle; padding: 5px;">核心能力</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">病人照護 Patient Care（PC） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">醫學知識 Medical Knowledge（MK） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">從工作中學習及成長 Practice-based learning and improvement （PBLI） </td>
                            <td style="border: 1px solid black; text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">人際與溝通技巧 Interpersonal & Communication Skills（ICS） </td>
                            <td style="border: 1px solid black; text-align: center;">✓</td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">專業素養 Professionalism（PROF） </td>
                            <td style="border: 1px solid black; text-align: center;"></td>
                        </tr>
                        <tr>
                            <td style="border: 1px solid black; padding: 5px;">制度下之臨床工作 System-based Practice（SBP） </td>
                            <td style="border: 1px solid black; text-align: center;"></td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <h3>5. 先備知識、技能、態度與經驗</h3>
        <table>
            <tr>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">知識</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">技能</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">態度</th>
                <th style="border: 1px solid black; text-align: center; vertical-align: middle; padding: 10px; background-color: #f2f2f2;">必要經歷</th>
            </tr>
            <tr>
                <td>(1)病人辨識方式。<br>(2)留置管路的適應症、部位及功能。<br>(3)留置管路的照護措施。<br>(4)留置管路的異常狀況。</td>
                <td>(1)執行病人辨識方式。<br>(2)留置管路護理技術之操作。<br>(3)確認留置管路部位及功能。<br>(4)評估留置管路的異常狀況。<br>(5)觀察病人的反應。<br>(6)會處理異常狀況。</td>
                <td>(1)尊重病人的隱私。<br>(2)理解病人的感受。<br>(3)主動關切病人不適狀況，並回報異常。</td>
                <td>見習留置管路照護作業至少 1 次。</td>
            </tr>
        </table>

        <h3>6. 評估進展所需相關資訊</h3>
        <p>直接觀察評估：針對學員在某一次（或某一班）任務執行的實際表現進行觀察與評估，推薦的工具有 ad-hoc EPA-based assessment、mini-CEX、DOPS……等，試用期內至少擇一工具完成 3 次。</p>

        <h3>7. 期待學員能夠獨立操作的時機</h3>
        <p>3個月內達Level 4。</p>

        <h3>8. 信賴等級維持期限</h3>
        <p>離開工作單位≧6 個月，信賴授權、應重新評估至少 1 次且信賴等級達 Level 4。</p>
    </div>

    <div id="tab2" class="content">
        <button class="btn-print print-pos no-print" onclick="handlePrint()">列印/另存PDF</button>
        <h1>台灣護理學會可信賴專業活動 EPAs-留置管路照護評量表</h1>

        <style>
            .info-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
                border: none !important;
            }

            .info-table td {
                padding: 10px 5px;
                border: none !important;
                vertical-align: middle;
            }

            .info-table input[type="text"], 
            .info-table input[type="date"] {
                padding: 5px;
                font-size: 14px;
            }
        </style>

        <table class="info-table">
            <tr>
                <td style="width: 45%;">
                    學員：<input type="text" id="studentName" placeholder="輸入姓名"> 
                </td>
                <td>
                    到職日（西元年∕月∕日）：<input type="date" id="hireDate"> 
                </td>
            </tr>
            <tr>
                <td>
                    教師：<input type="text" id="teacherName" placeholder="輸入姓名"> 
                </td>
                <td>
                    填表日期（西元年∕月∕日）：<input type="date" id="formDate"> 
                </td>
            </tr>
        </table>
        
        <div class="catheter-options">
            <b>留置管路照護：</b><br>
            <label><input type="radio" name="route"> 鼻胃管</label>
            <label><input type="radio" name="route"> 留置導尿管</label>
            <label><input type="radio" name="route"> 動脈導管(A-line)</label>
            <label><input type="radio" name="route"> IV-line</label>
            <label><input type="radio" name="route"> 胸腔引流管</label>
            <label><input type="radio" name="route"> 其他 <input type="text" style="width: 100px; padding: 2px;"></label>
        </div>

        <h3>1. 主題：留置管路照護</h3>

        <h3>2. 情境：</h3>
        <p>在臨床執行留置管路照護。</p>
        
        <h3>3. 信賴等級評量：</h3>
        <p>（觀察學員執行狀況，下次遇到類似情境時，你認為此學員勝任之程度)</p>
        
        <table >
            <tr>
                <th style="text-align: center; vertical-align: middle; width: 15%;">信賴等級</th>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 1</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 2</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 3</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 4</td>
                <td style="text-align: center; vertical-align: middle; width: 17%;">Level 5</td>
            </tr>
            <tr>
                <th style="text-align: center; vertical-align: middle;">評量項目</th>
                <td style="text-align: center; vertical-align: middle;">學習者在旁觀察</td>
                <td style="text-align: center; vertical-align: middle;">教師在旁指導，必要時協助</td>
                <td style="text-align: center; vertical-align: middle;">教師事後重點確認</td>
                <td style="text-align: center; vertical-align: middle;">可獨立執行</td>
                <td style="text-align: center; vertical-align: middle;">可對其他人進行教學</td>
            </tr>
            <tr>
                <th style="text-align: center; vertical-align: middle;">整體評量</th>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="1"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="2"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="3"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="4"></td>
                <td style="text-align: center; vertical-align: middle;"><input type="radio" name="trust_level" value="5"></td>
            </tr>
        </table>   

        <h3>4. 回饋參考內容</h3>
        <p style="font-size: 0.9em; color: #555;">(註：第1項與第7項可未觀察；2、3、5項建議必須符合期待以上)</p>
        <table id="ratingTable">
            <tr>
                <th style="text-align: center; vertical-align: middle;">觀察發現</th>
                <th style="text-align: center; vertical-align: middle;">未觀察</th><th style="text-align: center; vertical-align: middle;">可再加強</th><th style="text-align: center; vertical-align: middle;">符合期待</th><th style="text-align: center; vertical-align: middle;">優於期待</th>
            </tr>
            <tr>
                <td>(1) 確認醫囑</td>
                <td style="text-align: center;"><input type="radio" checked name="r1" value="na" onclick="toggleFeedback(1, 'na')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="bad" onclick="toggleFeedback(1, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="good" onclick="toggleFeedback(1, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r1" value="good" onclick="toggleFeedback(1, 'good')"></td>
            </tr>
            <tr>
                <td>(2) 執行病人辨識</td>
                <td style="text-align: center;"><input type="radio" name="r2" value="bad" onclick="toggleFeedback(2, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="bad" onclick="toggleFeedback(2, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="good" onclick="toggleFeedback(2, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r2" value="good" onclick="toggleFeedback(2, 'good')"></td>
            </tr>
            <tr>
                <td>(3) 評估管路置放部位及功能</td>
                <td style="text-align: center;"><input type="radio" name="r3" value="bad" onclick="toggleFeedback(3, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="bad" onclick="toggleFeedback(3, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="good" onclick="toggleFeedback(3, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r3" value="good" onclick="toggleFeedback(3, 'good')"></td>
            </tr>
            <tr>
                <td>(4) 執行管路護理</td>
                <td style="text-align: center;"><input type="radio" name="r4" value="bad" onclick="toggleFeedback(4, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="bad" onclick="toggleFeedback(4, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="good" onclick="toggleFeedback(4, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r4" value="good" onclick="toggleFeedback(4, 'good')"></td>
            </tr>
            <tr>
                <td>(5) 辨識管路異常狀況及處置</td>
                <td style="text-align: center;"><input type="radio" name="r5" value="bad" onclick="toggleFeedback(5, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="bad" onclick="toggleFeedback(5, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="good" onclick="toggleFeedback(5, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r5" value="good" onclick="toggleFeedback(5, 'good')"></td>
            </tr>
            <tr>
                <td>(6) 指導病人及照護者管路自我照顧</td>
                <td style="text-align: center;"><input type="radio" name="r6" value="bad" onclick="toggleFeedback(6, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r6" value="bad" onclick="toggleFeedback(6, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r6" value="good" onclick="toggleFeedback(6, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r6" value="good" onclick="toggleFeedback(6, 'good')"></td>
            </tr>
            <tr>
                <td>(7) 完成護理紀錄</td>
                <td style="text-align: center;"><input type="radio" checked name="r7" value="na" onclick="toggleFeedback(7, 'na')"></td>
                <td style="text-align: center;"><input type="radio" name="r7" value="bad" onclick="toggleFeedback(7, 'bad')"></td>
                <td style="text-align: center;"><input type="radio" name="r7" value="good" onclick="toggleFeedback(7, 'good')"></td>
                <td style="text-align: center;"><input type="radio" name="r7" value="good" onclick="toggleFeedback(7, 'good')"></td>
            </tr>
        </table>

        <h3>5. 學員質性回饋</h3>
        <textarea style="width: 98%; height: 200px; padding: 10px; font-size: 16px;" placeholder="請填寫您的學習心得："></textarea>

        <h3>6. 護理臨床教師質性回饋</h3>
        
        <div id="commendable-title" style="display:none; font-weight:bold; color:green; margin-top:10px;">值得嘉許：</div>
        
        <div id="good-feedback-1" class="feedback-group">
            <span class="print-exclude"><b>(1) 確認醫囑</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="good-feedback-2" class="feedback-group">
            <span class="print-exclude"><b>(2) 執行病人辨識</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能確實執行兩項病人辨識，顯示你對病人安全的重視。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>
        
        <div id="good-feedback-3" class="feedback-group">
            <span class="print-exclude"><b>(3) 評估管路置放部位及功能</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能主動比對鼻胃管外露刻度、固定位置與前一班紀錄，確保鼻胃管未滑脫。</label>
            <label class="feedback-item"><input type="checkbox"> 你在評估時同時觀察鼻腔皮膚、固定膠布鬆緊度、病人不適反應，展現全面性的評估能力。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="good-feedback-4" class="feedback-group">
            <span class="print-exclude"><b>(4) 執行管路護理</b></span>
            <label class="feedback-item"><input type="checkbox"> 在鼻胃管護理過程中，你會輕聲向病人說明每一步驟，減少不適，展現你的同理與專業態度。</label>
            <label class="feedback-item"><input type="checkbox"> 更換鼻部固定時，你能避免拉扯管路並同時保護皮膚，操作動作溫柔。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>
        
        <div id="good-feedback-5" class="feedback-group">
            <span class="print-exclude"><b>(5) 辨識管路異常狀況及處置</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能辨識可能的鼻胃管滑脫徵象，如刻度改變、病人咳嗽、引起噁心，並能及時請求協助。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="good-feedback-6" class="feedback-group">
            <span class="print-exclude"><b>(6) 指導病人及照護者管路自我照顧</b></span>
            <label class="feedback-item"><input type="checkbox"> 你能以淺顯方式教導病人避免拉扯、轉身時注意管路，講解清楚具體。</label>
            <label class="feedback-item"><input type="checkbox"> 衛教時你會確認病人與家屬是否理解，並再次簡述重點，展現良好的衛教技巧。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="good-feedback-7" class="feedback-group">
            <span class="print-exclude"><b>(7) 完成護理紀錄</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="improvement-title" style="display:none; font-weight:bold; color:red; margin-top:10px;">可再精進：</div>
        
        <div id="bad-feedback-1" class="feedback-group">
            <span class="print-exclude"><b>(1) 確認醫囑</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="bad-feedback-2" class="feedback-group">
            <span class="print-exclude"><b>(2) 執行病人辨識</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="bad-feedback-3" class="feedback-group">
            <span class="print-exclude"><b>(3) 評估管路置放部位及功能</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="bad-feedback-4" class="feedback-group">
            <span class="print-exclude"><b>(4) 執行管路護理</b></span>
            <label class="feedback-item"><input type="checkbox"> 建議再多注意鼻腔皮膚壓傷或紅腫狀況，早期發現可避免後續皮膚破損。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>
        
        <div id="bad-feedback-5" class="feedback-group">
            <span class="print-exclude"><b>(5) 辨識管路異常狀況及處置</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="bad-feedback-6" class="feedback-group">
            <span class="print-exclude"><b>(6) 指導病人及照護者管路自我照顧</b></span>
            <label class="feedback-item"><input type="checkbox"> 在指導時可增加示範，如如何避免拉扯、睡姿調整等，讓病人更容易理解且能自行操作。</label>
            <label class="feedback-item"><input type="checkbox"> 衛教內容建議補充「何時需立即告知護理人員」之情境，例如噁心、咳嗽、管路滑出等。</label>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <div id="bad-feedback-7" class="feedback-group">
            <span class="print-exclude"><b>(7) 完成護理紀錄</b></span>
            <label class="feedback-item">
                <input type="checkbox"> <span class="print-exclude">其他：</span>
                <input type="text" class="other-text-input" placeholder="請輸入自訂回饋內容..." style="width: 600px; padding: 4px 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; font-size: 16px; font-weight: normal; outline: none;">
            </label>
        </div>

        <br>
        <button class="btn-print no-print" onclick="handlePrint()">列印/另存PDF</button>
    </div>

    <script>
        // 頁籤切換
        function showTab(tabId) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
            document.querySelector(`button[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // 聯動回饋邏輯
        function toggleFeedback(itemNum, type) {
            const goodGroup = document.getElementById(`good-feedback-${itemNum}`);
            const badGroup = document.getElementById(`bad-feedback-${itemNum}`);
            
            if (goodGroup && badGroup) {
                if (type === 'good') {
                    goodGroup.style.display = 'block';
                    badGroup.style.display = 'none';
                    badGroup.querySelectorAll('input').forEach(i => i.checked = false);
                } else if (type === 'bad') {
                    goodGroup.style.display = 'none';
                    badGroup.style.display = 'block';
                    goodGroup.querySelectorAll('input').forEach(i => i.checked = false);
                } else {
                    // na 模式：隱藏兩者並清除勾選
                    goodGroup.style.display = 'none';
                    badGroup.style.display = 'none';
                    goodGroup.querySelectorAll('input').forEach(i => i.checked = false);
                    badGroup.querySelectorAll('input').forEach(i => i.checked = false);
                }
            }

            // 控制大標題顯示
            updateSectionTitles();
        }

        function updateSectionTitles() {
            const anyGood = Array.from(document.querySelectorAll('[id^="good-feedback-"]')).some(el => el.style.display === 'block');
            const anyBad = Array.from(document.querySelectorAll('[id^="bad-feedback-"]')).some(el => el.style.display === 'block');
            
            document.getElementById('commendable-title').style.display = anyGood ? 'block' : 'none';
            document.getElementById('improvement-title').style.display = anyBad ? 'block' : 'none';
        }

        // 列印功能
        function handlePrint() {
            const name = document.getElementById('studentName').value || "未填寫";
            const date = document.getElementById('formDate').value || "未填寫日期";
            const originalTitle = document.title;

            // 設置 PDF 檔名（透過修改網頁 Title）
            document.title = `EPAs-留置管路照護-${name}-${date}`;
            
            window.print();
            
            // 還原標題
            document.title = originalTitle;
        }

        // 預設今天日期
        document.getElementById('formDate').valueAsDate = new Date();
    </script>
</body>
</html>